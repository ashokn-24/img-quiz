const questions =[
  {
    question: "தமிழ்நாட்டின் குடைவரைக் கோயில்களில் எந்த வகையான தூண்கள் உள்ளன? <br> Which type of pillars present in Cave-temples of Tamil Nadu?",
    answers: [
      { image:"/images/ques-1/op-1.jpg", correct: true},  
      { image:"/images/ques-1/op-2.jpg", correct: false},
      { image:"/images/ques-1/op-3.jpg", correct: false},
      { image:"/images/ques-1/op-4.jpg", correct: false},
    ],
  },
  {
    question: "திருச்சிராப்பள்ளி கீழ்ப்பாறையில் வெட்டப்பட்ட குடைவரை  கோயிலை அடையாளம் காணவும் <br> Identify the Tiruchchirappalli Lower rock-cut cave temple?",
    answers: [
      { image:"/images/ques-2/op-1.jpg", correct: false},  
      { image:"/images/ques-2/op-2.jpg", correct: false},
      { image:"/images/ques-2/op-3.jpg", correct: true},
    ],
  },
  {
    question: "குடைவரை வகை” கட்டிடக்கலையை அடையாளம் காணவும் <br> Identify the Cut-in type of Architecture?", 
    answers: [
      { image:"/images/ques-3/op-1.jpg", correct: true},  
      { image:"/images/ques-3/op-2.jpg", correct: false},
      { image:"/images/ques-3/op-3.jpg", correct: false},
    ],
  },
  {
    question: "(கழுகுமலை) வெட்டுத்தளி  வகை கட்டிடக்கலையை அடையாளம் காணவும் <br>Identify the (Kazhukumalai) Cut-out type of Architecture?",
    answers: [
      { image:"/images/ques-4/op-1.jpg", correct: false},  
      { image:"/images/ques-4/op-2.jpg", correct: false},
      { image:"/images/ques-4/op-3.jpg", correct: true},
    ],
  },
  {
    question: "குடுமியான்மலையிலிருந்து “பிரிவதினிதா” கல்வெட்டை அடையாளம் காணவும் <br> Identify the “privathinitha” inscription from Kudumiyanmalai?",
    answers: [
      { image:"/images/ques-5/op-1.jpg", correct: true},  
      { image:"/images/ques-5/op-2.jpg", correct: false},
      { image:"/images/ques-5/op-3.jpg", correct: false},
    ],
  },
  {
    question: "அனந்தசயன விஷ்ணு” சிற்பத்தை அடையாளம் காணவும் <br> Identify the “Anantasayana Vishnu” sculpture.",
    answers: [
      { image:"/images/ques-6/op-1.jpg", correct: false},
      { image:"/images/ques-6/op-2.jpg", correct: true},
      { image:"/images/ques-6/op-3.jpg", correct: false},
    ],
  },
  {
    question: "குடைவரை கட்டிடக்கலையில் பயன்படுத்தப்படும் கருவிகளை அடையாளம் காணவும்? <br> Identify the tools used in rock-cut architecture.",
    answers: [
      { image:"/images/ques-7/op-1.jpg", correct: false},
      { image:"/images/ques-7/op-2.jpg", correct: true},
      { image:"/images/ques-7/op-3.jpg", correct: false},
    ],
  },
  {
    question: "குடைவரைக் கோயில்கள் எதனால் செய்யப்பட்டுள்ளன? <br> What are the cave temples made of?",
    answers: [
      { image:"/images/ques-8/op-1.jpg", correct: false},  
      { image:"/images/ques-8/op-2.jpg", correct: false},
      { image:"/images/ques-8/op-3.jpg", correct: true},
    ],
  },
  {
    question: "ஆனைமலை மற்றும் திருப்பரங்குன்றம் குடைவரை  கோவில்கள் எந்த மாவட்டத்தில் அமைந்துள்ளன? <br> In which district Anaimalai and Tiruparankundram rock-cut temples are located?",
    answers: [
      { image:"/images/ques-9/op-1.jpg", correct: false},  
      { image:"/images/ques-9/op-2.jpg", correct: false},
      { image:"/images/ques-9/op-3.jpg", correct: true},
    ],
  },
  {
    question: "கல்வெட்டுகளுடன் கூடிய குடைவரைகளை அதிகம் கொண்ட மாநிலம் எது? <br> Which state has the maximum rock-cut caves with inscriptions?",
    answers: [
      { image:"/images/ques-10/op-1.jpg", correct: false},  
      { image:"/images/ques-10/op-2.jpg", correct: true},
      { image:"/images/ques-10/op-3.jpg", correct: false},
    ],
  },
  {
    question: "பின்வருவனவற்றில் கணியன் பூங்குன்றனாரின் படைப்புகள் இடம்பெற்றுள்ள சங்க இலக்கிய நூல் எது ? <br> Which among the following comprises the works of Kaniyan Poonkundranar?",
    answers: [
      { image:"/images/ques-11/op-1.jpg", correct: false},  
      { image:"/images/ques-11/op-2.jpg", correct: true},
      { image:"/images/ques-11/op-3.jpg", correct: false},
    ],
  },
  {
    question: "துவாரபாலிகா (பெண் காவலர்கள்) சிற்பங்களை அடையாளம் காணவும். <br> Identify the dvarapalika (female guards) sculptures.",
    answers: [
      { image:"/images/ques-12/op-1.jpg", correct: false},  
      { image:"/images/ques-12/op-2.jpg", correct: true},
    ],
  },
  {
    question: "பின்வருவனவற்றில் சித்தன்னவாசல் ஓவியங்களை அடையாளம் காணவும். <br> Identify the Sittanavasal paintings among the following.",
    answers: [
      { image:"/images/ques-13/op-1.jpg", correct: true},  
      { image:"/images/ques-13/op-2.jpg", correct: false},
    ],
  },
  {
    question: "சங்க காலத்தில் ஆட்சி செய்த பாண்டியர்களின் கொடியை அடையாளம் காணவும். <br> Identify the Pandyas flag who flourished during the Sangam age.",
    answers: [
      { image:"/images/ques-14/op-1.jpg", correct: true},  
      { image:"/images/ques-14/op-2.jpg", correct: false},
      { image:"/images/ques-14/op-3.jpg", correct: false},
    ],
  },
  {
    question: "பின்வருவனவற்றிலிருந்து புடைப்புச் சிற்பம்  அடையாளம் காணவும். <br> Identify the bas-relief from the following.",
    answers: [
      { image:"/images/ques-15/op-1.jpg", correct: true},  
      { image:"/images/ques-15/op-2.jpg", correct: false},
    ],
  },
]

const qusElement = document.querySelector(".question")
const ansBtn = document.querySelector(".ans-btn")
const nextBtn = document.getElementById("next-btn")
const optionContainer = document.getElementById("option-container");
const qrImage = document.getElementById("qr-section")

let currentQueIndex = 0;
let correctAnswerCount = 0;

function showQuestion(){
    let currentQue = questions[currentQueIndex]
    let queNo = currentQueIndex + 1
    
    if (currentQueIndex > questions.length - 1) {
      console.log("Questions over");
      qusElement.innerText = `You got ${correctAnswerCount} answers right out of ${questions.length} questions`;
      questionImage.src="./img/final-img.jpg"
      grade()
    } else {
      qusElement.innerHTML = queNo +". "+ currentQue.question

        const row = document.createElement("div");
        row.classList.add("row");
        row.id = "options";

        currentQue.answers.forEach(answer => {
            const img = document.createElement("img");
            img.src = answer.image;
            img.classList.add("img-thumbnail");
            img.classList.add("img-opt");
            img.classList.add("col-lg-3");

            if (answer.correct) {
                img.dataset.correct = "true";
            }

            img.addEventListener("click", selectAns)

            row.append(img);

        });

    optionContainer.append(row);
  }
}

function grade(){
  if(correctAnswerCount < 6){
    qusElement.innerText = `Good`;
  }
  if(correctAnswerCount > 6 && correctAnswerCount <10 ){
    qusElement.innerText = `Great`;
  }
  if(correctAnswerCount > 10 && correctAnswerCount <15){
    qusElement.innerHTML = `Excelent`;
  }
}


function startTimer(duration, display) {
  var timer = duration, minutes, seconds;
  setInterval(function () {
      minutes = parseInt(timer / 60, 10);
      seconds = parseInt(timer % 60, 10);

      minutes = minutes < 10 ? "0" + minutes : minutes;
      seconds = seconds < 10 ? "0" + seconds : seconds;

      display.textContent = minutes + ":" + seconds;

      if (--timer < 0) {
          timer = duration;
      }
  }, 1000);
}

function callTimer(){
  var fiveMinutes = 60 * 5,
  display = document.querySelector('#time');
  startTimer(fiveMinutes, display);
}
  
function selectAns(e) {
    callTimer()
    const target = e.target
    const isCorrect = target.dataset.correct === "true"

    if (isCorrect) {
        target.classList.add("btn-success");
        correctAnswerCount++
    } else {
        target.classList.add("btn-danger");
    }

    nextBtn.disabled = false;


    console.log(optionContainer.tagName)
  
    const options = document.getElementById("options").children;
    console.log(options);
  
    for (let i = 0; i < options.length; i++) {
      let option = options[i];

      if (option.dataset.correct === "true") {
        option.classList.add("btn-success");
      } else {
        option.classList.add("disable");
        removeClick(option);
      }
    }
  }
  
  nextBtn.addEventListener("click", () => {
    currentQueIndex++;
    reset();
    showQuestion();
  });
  
  function reset() {
    optionContainer.innerHTML = "";
    nextBtn.disabled = true;
  }
    
  function removeClick(option) {
    option.removeEventListener("click", selectAns);
  }

  showQuestion()
  console.log()
